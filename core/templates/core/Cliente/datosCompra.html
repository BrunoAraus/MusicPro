{% extends 'core/Template.html' %}
{% load static %}
{% load djmoney %}
{% load crispy_forms_tags %}

{% block contenido %}
<head>
    <link rel="stylesheet" href="{% static 'core/css/datosCompra.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</head>

<body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
          crossorigin="anonymous">
  </script>

  <div class="contenedor">
    <div class="contenido">

      <div class="datosPago">
        <div class="accordion" id="accordionExample">

          <!--ACCORDION 1: IDENTIFICACIÓN-->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                <h1 class="titulosAcordion">Identificación</h1> 
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                <!-- ACA HABRÁ UN APARTADO PARA PONER EL CORREO Y OTROS DATOS COMPLEMENTARIOS -->
                <form class="row g-3">
                  <div class="col-md-4">
                    <label for="nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Nombre">
                  </div>
                  <div class="col-md-4">
                    <label for="apellido" class="form-label">Apellido</label>
                    <input type="text" class="form-control" id="apellido" name="apellido" placeholder="Apellido">
                  </div>
                  <div class="col-md-4">
                    <label for="email" class="form-label">Correo electrónico</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="Correo electrónico">
                  </div>
                  <div class="col-md-4">
                    <label for="telefono" class="form-label">Número de celular</label>
                    <input type="tel" class="form-control" id="telefono" name="telefono" placeholder="Número de celular">
                  </div>
                  
                  <div class="col-12">
                    <button class="btn btn-primary" type="submit">Enviar</button>
                  </div>                
                </form>
              </div>
            </div>
          </div>

          <!--ACCORDION 2: DESPACHO-->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                <h1 class="titulosAcordion">Despacho</h1> 
              </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                <!-- ACA HABRÁ UN APARTADO PARA RELLENAR LA INFORMACIÓN DE ENVÍO -->

                <form action="" method="post">
                  {% csrf_token %}
                  {{ form|crispy}}
                  <button type="submit" class="botonEnviar">Enviar</button>
                </form>
                

                <form class="row g-3">
                  <div class="botonesCheck">
                      <div class="form-check">
                      <input class="form-check-input" type="radio" name="exampleRadios" id="domicilio" value="domicilio" checked>
                      <label class="form-check-label" for="domicilio">
                        Domicilio
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="exampleRadios" id="retiro" value="retiro">
                      <label class="form-check-label" for="retiro">
                        Retiro en tienda
                      </label>
                    </div>
                  </div>
                  <div class="datosEnvio">
                    <div class="col-md-4" id="calle-div">
                      <label for="calle" class="form-label">Nombre de la calle</label>
                      <input type="text" class="form-control" id="calle" name="calle" placeholder="Calle">
                    </div>
                    <div class="col-md-4" id="numeroCalle-div">
                      <label for="numeroCalle" class="form-label">Número de calle</label>
                      <input type="text" class="form-control" id="numeroCalle" name="numeroCalle" placeholder="Número de calle">
                    </div>              
                    <div class="col-md-3" id="region-div">
                      <label for="region" class="form-label">Región</label>
                      <select class="form-select" id="region">
                        <option selected disabled value="">Elige una región</option>
                        <option>
                        <!-- ACA DEBE IR UN FOR DE LAS REGIONES, Y AL ESCOGER -->
                          ....
                        </option>
                      </select>
                    </div>
                  </div>
                                
                  <div class="col-12" id="tienda-div" style="display: none;">
                    <h1 id="sucursalTitulo1">Sucursal</h1>
                    <h1 id="sucursalTitulo2">Zaragoza 8488, 7970609 La Cisterna, Región Metropolitana</h1>
                  </div>              
                </form>

              </div>
            </div>
          </div>

          <!--ACCORDION 3: MÉTODOS DE PAGO-->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                  <h1 class="titulosAcordion">Métodos de pago</h1> 
              </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
              <div class="accordion-body">              
                <!-- ACA SE DESPLIEGAN LOS CHECK PARA ESCOGER LA FORMA DE PAGO -->
                <form class="ordenPago">
                  <div class="botonesCheck">
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="webpay" value="webpay" checked>
                        <label class="form-check-label" for="webpay">
                        <img src="{% static 'core/imagenes/pagos.png' %}" alt="" class="imagenesPagos">
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="transferencia" value="transferencia">
                        <label class="form-check-label" for="transferencia">
                        <img src="{% static 'core/imagenes/transferencia.png' %}" alt="" class="imagenesPagos">
                        </label>
                      </div>
                  </div> 
                  <a href="{% url 'datosTransferencia' %}" >
                    <button type="button"class="btn btn-primary">Ir a pagar</button>
                  </a>
                </form>              
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="carritoCompra1">
        <div class="contenidoCarrito1">
          <table class="listaCarrito1">
              <tbody>
                  {% if request.session.carrito.items %}
                    {% for key, value in request.session.carrito.items %}
                      <tr>
                          <thead>
                              <tr>
                                  <th id="espacioImagen">Imagen</th>
                                  <th class="espacioTitulos">Nombre</th>
                                  <th class="espacioTitulos">Precio</th>
                                  <th class="espacioTitulos">Cantidad</th>
                              </tr>
                          </thead>
                          <thead>
                              <tr>
                                  <th><img class="imagenCarrito" src="{{ value.imagen }}"></th>
                                  <th class="datosTabla">{{ value.nombre }}</th>
                                  <th class="datosTabla">${% money_localize value.acumulado 'clp' %}</th>
                                  <th class="datosTabla3">
                                      <a href="{% url 'Add' value.producto_id %}"
                                          class="badge btn btn-dark badge-dark">+</a>
                                      <span>{{value.cantidad}}</span>
                                      <a href="{% url 'Sub' value.producto_id %}"
                                          class="badge btn btn-dark badge-dark">-</a>
                                      <h1 class="alertaStock">{{value.mensaje}}</h1>
                                  </th>
                                  <th class="datosTabla2">
                                      <a href="{% url 'Del' value.producto_id %}">
                                          <img src="{% static 'core/imagenes/icons8-basura.gif' %}"
                                              alt="">
                                      </a>
                                  </th>
                                  <th class="datosTabla2">
                                      <a href="{% url 'detalle_producto' value.producto_id %}">
                                          <img src="{% static 'core/imagenes/icons8-información (1).gif' %}"
                                              alt="">
                                      </a>
                                  </th>
                              </tr>
                          </thead>
                      </tr>
                {% endfor %}
              {% endif %}
            </tbody>
          </table>
        </div>
        <tr>
          <p class="precioTotal1">Total: ${% money_localize total_carrito 'clp' %}</p>
        </tr>
      </div>

    </div>
  </div>
</body>

<script src="{% static 'core/js/datosCompra.js' %}"></script>
{% endblock %}